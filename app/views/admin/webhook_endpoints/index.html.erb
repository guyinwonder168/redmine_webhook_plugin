<h2><%= l(:label_webhook_endpoints) %></h2>

<div class="contextual">
  <%= link_to l(:label_webhook_endpoint_new), new_admin_webhook_endpoint_path, class: "icon icon-add" %>
</div>

<table class="list webhook-endpoints">
  <thead>
    <tr>
      <th><%= l(:field_name) %></th>
      <th><%= l(:field_url) %></th>
      <th><%= l(:field_enabled) %></th>
      <th><%= l(:label_action) %></th>
    </tr>
  </thead>
  <tbody>
    <% @endpoints.each do |endpoint| %>
      <tr>
        <td><%= endpoint.name %></td>
        <td><%= endpoint.url %></td>
        <td><%= endpoint.enabled? ? l(:label_yes) : l(:label_no) %></td>
        <td>
          <%= link_to l(:button_edit), edit_admin_webhook_endpoint_path(endpoint), class: "icon icon-edit" %>
          <%= link_to l(:label_webhook_send_test), test_admin_webhook_endpoint_path(endpoint),
                      method: :post, class: "icon icon-test" %>
          <%= link_to l(:label_webhook_deliveries), admin_webhook_deliveries_path(endpoint_id: endpoint.id),
                      class: "icon icon-deliveries" %>
          <%= link_to l(:label_toggle), toggle_admin_webhook_endpoint_path(endpoint),
                      method: :patch, class: "icon icon-toggle" %>
          <%= link_to l(:button_delete), admin_webhook_endpoint_path(endpoint),
                      method: :delete, data: { confirm: l(:text_are_you_sure) }, class: "icon icon-del" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
